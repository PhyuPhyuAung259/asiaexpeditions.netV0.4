function readURL(t,e){if(t.files&&t.files[0]){var a=new FileReader;a.onload=function(t){$("#"+e).attr("src",t.target.result)?$(this).hide():$(this).show()},a.readAsDataURL(t.files[0])}}function getVehicle(t,e){return $.ajax({method:"GET",url:baseUrl+"transport/vihecle",data:"sup_id="+t+"&tran_id="+e,dataType:"json",success:function(t){dataHtml="",t.query_data?$.each(t.query_data,function(t){dataHtml+="<tr><td>"+this.name+"</td><td class='text-right'>"+this.price+"</td><td class='text-right'>"+this.kprice+"</td><td class='text-right'><a href='javascript:void(0)' class='btnEdit'  data-id='"+this.tran_id+"' data-name='"+this.name+"'   data-price='"+this.price+"' data-kprice='"+this.kprice+"' title='Remove this?'><i style='padding:1px 2px;' class='btn btn-info btn-xs fa fa-pencil-square-o'></i></a>&nbsp;<a href='javascript:void(0)' class='RemoveHotelRate' data-id='"+this.tran_id+"' title='Remove this?' data-type='vehicle'><i style='padding:1px 2px;' class='btn btn-danger btn-xs fa  fa-minus-circle'></i></a></td></tr>"}):dataHtml="<tr><td colspan='4' class=text-center>Result Not Found ...!</td></tr>",$("tbody#TransportDataList").html(dataHtml)},error:function(){return alert("Something Wrong."),!1}}),!1}function dataFilter(t,e,a,i,n){return $.ajax({method:"GET",url:t,data:"dataName="+e+"&type="+a+"&filterType="+n,dataType:"html",beforeSend:function(){$("#data_filter").html('<i class="fa fa-spinner fa-spin loading"></i>')},success:function(t){$("#data_filter").next().remove(),$(i).html(t)},error:function(t,e,a){return alert("Error!"+t.status),!1},complete:function(){$("#data_filter").next().remove()}}),!1}function getData(t,e){return $.ajax({method:"GET",url:baseUrl+"guide/service/"+t+"/language",dataType:"html",success:function(t){$(e).html(t)},error:function(){return alert("Something Wrong."),!1}}),!1}function loadService(t,e,a,i){return $.ajax({method:"GET",url:baseUrl+"option/findlocaiton",data:"id="+t+"&datatype="+e+"&selectedid="+i,dataType:"html",beforeSend:function(){$(a).html('<tr> <td colspan="4" class="text-center"><i class="fa fa-spinner fa-spin"></i></td> </tr>')},success:function(t){$(a).html(t)},error:function(t,e,a){return alert("Error!"+t.status),!1},complete:function(){}}),!1}function insertData(t,e,a){return $.ajax({method:"POST",url:t,data:e,dataType:"json",beforeSend:function(){$(a).text("Loading"),$(a).attr("disabled","disabled")},success:function(t){$("html, body").animate({scrollTop:0},"slow"),messageData='<div class="col-md-12"> <div class="alert alert-dismissible fade show '+t.messagetype+'" role="alert" style="position: relative; padding-left: 53px;"><i class="fa '+t.status_icon+'" style="font-size: 37px; position:absolute; top: 5px; left: 10px;"></i><div><span> '+t.message+'  </span></div><p></p><button type="button" class="close" data-dismiss="alert" aria-label="Close" style=" position: absolute;right: 7px;top: 13px;"><span aria-hidden="true" style="font-size: 22px;padding: 1px 8px;">&times;</span></button></div></div>',$(".notify-message").html(messageData)},error:function(t,e,a){return alert("Error!"+t.status),!1},complete:function(){$(a).text("Publish"),$(a).removeAttr("disabled"),$("#myModal").modal("hide")}}),!1}var baseUrl=location.protocol+"//"+location.host+"/";$(document).ready(function(){$(".checkMebox").on("click",function(){var t=$(this).find("input"),e=$(this).find("i");$(t).is(":checked")?($(e).removeClass("fa fa-square-o"),$(e).addClass("fa fa-check-square-o")):($(e).removeClass("fa fa-check-square-o"),$(e).addClass("fa fa-square-o"))}),$("#choosImg, #blah").click(function(){$("#imgInp").click()}),$("#imgInp").change(function(){readURL(this,"blah"),$("#blah").show()}),$(".btnTranEdit").on("click",function(t){var e=$("#form_submitTourType").serialize();t.preventDefault(),TourUrl=baseUrl+"create/tourtype/",insertData(TourUrl,e,$("#btnTourType"))}),$(document).on("click",".restEditMenu",function(){var t=$(this).data("type"),e=$(this).data("price"),a=$(this).data("kprice"),i=$(this).data("menu"),n=$(this).data("id"),o=$(this).data("country_id"),r=$(this).data("rest_name");loadService(o,t,$("#dropdown-restaurant"),r),$("#country option").each(function(t){$(this).val()==o?$(this).attr("selected",!0):$(this).removeAttr("selected",!0)}),$("#restid").val(n),$("#price").val(e),$("#kprice").val(a),$("#menu_name").val(i)}),$(".locationchange").on("change",function(){$(this).closest("form").submit()}),$(document).on("input",".number_only",function(t){var e=$(this);e.val(e.val().replace(/[^0-9\.]/g,"")),46==t.which&&-1==e.val().indexOf(".")||!(t.which<48||t.which>57)||t.preventDefault()}),$(".attachment").on("click",function(){$(this).addClass("selected")}),$(".editprice").on("dblclick",function(){$(this).removeAttr("readonly"),$(this).attr("name",$(this).data("label"))}),$(document).on("click",".tranEditDriver",function(){return $.ajax({method:"GET",url:baseUrl+"/transport/driver/add",data:"eid="+$(this).data("id"),dataType:"json",success:function(t){$("#eid").val(t.data_load.id),$("#driver_name").val(t.data_load.driver_name),$("#phone").val(t.data_load.phone),$("#phone2").val(t.data_load.phone2),$("#email").val(t.data_load.email),$("#email2").val(t.data_load.email2),$("#address").val(t.data_load.address),$("#intro").val(t.data_load.intro)},error:function(){return alert("Something Wrong."),!1},complete:function(){}}),!1}),$(document).on("change","#addVehicleTransport",function(){getVehicle($(this).val(),$("option:selected",this).data("transport")),$("#transport_id").val($("option:selected",this).data("transport"))}),$(document).on("click",".btnEditVehicle",function(){loadService($(this).data("id"),$(this).data("type"),$("select#addVehicleTransport"),"Vehicle")}),$(document).on("click",".btnAddVehicle",function(){return $.ajax({method:"GET",url:baseUrl+"/transport/edit",data:"eid="+$(this).data("id"),dataType:"json",success:function(t){loadService(t.data_load.province_id,"transport_service",$("ul#dropdown-supplier"),t.serviceID),loadService(t.data_load.country_id,"country",$("select#dropdown-data"),t.data_load.province_id),$("#eid").val(t.data_load.id),$("#service_name").val(t.data_load.title),$("#country option").each(function(e){$(this).val()==t.data_load.country_id?$(this).attr("selected",!0):$(this).removeAttr("selected",!0)})},error:function(){return alert("Something Wrong."),!1}}),!1}),$(document).on("click",".btnTranUpdate",function(){return $.ajax({method:"GET",url:baseUrl+"transport/edit",data:"eid="+$(this).data("id"),dataType:"json",success:function(t){loadService(t.data_load.province_id,"transport_service",$("#dropdown-transport_service"),t.serviceID),loadService(t.data_load.country_id,"country",$("select#dropdown-data"),t.data_load.province_id),$("#eid").val(t.data_load.id),$("#service_name").val(t.data_load.title),$("#country option").each(function(e){$(this).val()==t.data_load.country_id?$(this).attr("selected",!0):$(this).removeAttr("selected",!0)})},error:function(){return alert("Sometshing Wrong."),!1}}),!1}),$(".country").on("change",function(){var t=$(this).val(),e=$(this).data("type");return $.ajax({method:"GET",url:baseUrl+"option/findlocaiton",data:"id="+t+"&datatype="+e,dataType:"html",success:function(t){$("#dropdown-data").html(t)},error:function(){return alert("Something Wrong."),!1}}),!1})}),$(document).ready(function(){$("#LoadingRow").css({display:"none"});var t=1;$(".addHotelRate").on("click",function(){var e=$("#urlRate").val(),a=$(this).data("type");return $.ajax({method:"GET",url:e,data:"i="+t+"&type="+a,dataType:"html",beforeSend:function(){$(this).attr("disabled","disabled"),$("#LoadingRow").css({display:"block"}),$("#placeholder").addClass("loading")},success:function(e){t++,$("#hotel-rate tbody tr:last").after(e)},error:function(){return alert("Something Wrong."),!1},complete:function(){$("#LoadingRow").css({display:"none"})}}),!1}),$(document).on("click",".RemoveHotelRate",function(){var t=$(this).closest("tr"),e=$(this).data("id"),a=$(this).data("type");if(!confirm("Are you sure you want to delete this?"))return!1;$.ajax({method:"GET",url:baseUrl+"option/remove",data:"type="+a+"&dataId="+e,dataType:"json",beforeSend:function(){$(this).css("pointer-events","none")},success:function(e){console.log(e),t.css({"background-color":"#9E9E9E"}),t.fadeOut(500,function(){$(t).remove()})},error:function(){return alert("Something Wrong."),!1},complete:function(){$(this).css("pointer-events","auto")}})}),$(document).on("click",".btnRefresh",function(){if(!confirm("Your want to clear this service?"))return!1;$.ajax({method:"GET",url:baseUrl+"option/remove",data:"type="+$(this).data("type")+"&dataId="+$(this).data("id"),dataType:"json",beforeSend:function(){$(this).css("pointer-events","none")},success:function(t){location.reload()},error:function(){return alert("Something Wrong."),!1},complete:function(){$(this).css("pointer-events","auto"),location.reload()}})}),$(".checkRoom").on("click",function(){var t=$(this).closest("tr td").find(".check"),e=$(this).closest("tr td").find(".nocheck");$(this).is(":checked")?($(t).css({display:"block"}),$(e).css({display:"none"})):($(t).css({display:"none"}),$(e).css({display:"block"}))}),$(".choose-option").on("click",function(t){var e=$(this).closest("span").find("i");$(e.removeClass("fa-square-o")),$(this).is(":checked")?($(e).removeClass("fa-square-o"),$(e).addClass("fa-check-square")):($(e).removeClass("fa-check-square"),$(e).addClass("fa-square-o"))}),$(".filterHotel").on("change",function(){window.location.href=baseUrl+"hotel/apply/room/"+$(this).val()})}),$(document).ready(function(){$("#form_submitTourType").on("submit",function(t){t.preventDefault(),TourUrl=baseUrl+"create/tourtype/",insertData(TourUrl,$("#form_submitTourType").serialize(),$("#btnTourType"))}),$(".editTourType").on("click",function(t){var e=$(this).data("id"),a=$(this).data("url");$.ajax({method:"GET",url:a,data:"dataId="+e,dataType:"json",success:function(t){return $("#eid").val(t.id),$("#title").val(t.name),$("#bus_ios").val(t.business_iso),$("#meta_keyword").val(t.meta_keyword),$("#meta_desc").val(t.meta_description),!1},error:function(t,e,a){return alert("Error!"+t.status),!1}}),$("#eid").val(e)})}),$(document).ready(function(){$("#form_submittransportService").on("submit",function(t){t.preventDefault(),TourUrl=baseUrl+"transport/service/added",insertData(TourUrl,$("#form_submittransportService").serialize(),$("#btnSubmitTran"))}),$("#form_submitVehicle").on("submit",function(t){t.preventDefault(),VhUrl=baseUrl+"transport/added/vehicle",insertData(VhUrl,$("#form_submitVehicle").serialize(),$("#btnAddLanguage")),getVehicle($("option:selected",$("#addVehicleTransport")).val(),$("#transport_id").val())}),$(".province").on("change",function(){loadService($(this).val(),$(this).data("type"),$("#dropdown-supplier"),"transport service")}),$("#btnCreateTransport").click(function(){$("#service_name").val(""),$("#eid").val(""),$("#service_code").val(""),$("#form_title").text("Add Transport Service")}),$(".tranEditMenu").on("click",function(){$("#form_title").text("Update Transport Service");var t=$(this).data("country"),e=$(this).data("city"),a=$(this).data("id"),i=$(this).data("supplier"),n=$(this).data("title");$("#service_name").val(n),$("#eid").val(a),$("#service_code").val($(this).data("code")),$("#country option").each(function(e){$(this).val()==t?$(this).attr("selected",!0):$(this).removeAttr("selected",!0)}),$(".province option").each(function(t){$(this).val()==e?$(this).attr("selected",!0):$(this).removeAttr("selected",!0)}),$(".supplier option").each(function(t){$(this).val()==i?$(this).attr("selected",!0):$(this).removeAttr("selected",!0)})}),$(".vehicleEdit").on("click",function(){$("#vhid").val($(this).data("id")),$("#vehicle").val($(this).data("title")),$("#price").val($(this).data("price")),$("#kprice").val($(this).data("kprice")),$("#form_title").text("Update Vehicle")}),$("#btnAddVehicle").click(function(){$("#vhid").val(""),$("#form_title").text("Add Vehicle"),$("#vehicle").val(""),$("#price").val(""),$("#kprice").val("")}),$(".miscEdit").on("click",function(){$("#form_title").text("Update MISC Service"),$("#title").val($(this).data("title")),$("#price").val($(this).data("price")),$("#kprice").val($(this).data("kprice")),$("#nprice").val($(this).data("nprice")),$("#nkprice").val($(this).data("nkprice")),$("#eid").val($(this).data("id"));var t=$(this).data("country"),e=$(this).data("province");$("#country option").each(function(e){$(this).val()==t?$(this).attr("selected",!0):$(this).removeAttr("selected",!0)}),$(".province option").each(function(t){$(this).val()==e?$(this).attr("selected",!0):$(this).removeAttr("selected",!0)})}),$("#addMiscService").on("click",function(){$("#form_title").text("Add MISC Service"),$("input[type='text']").val(""),$("#eid").val(""),$("#country option").each(function(t){$(this).removeAttr("selected",!0)}),$(".province option").each(function(t){$(this).removeAttr("selected",!0)})}),$("#form_submitMISCService").on("submit",function(t){t.preventDefault(),VhUrl=baseUrl+"misc/service/added",insertData(VhUrl,$("#form_submitMISCService").serialize(),$("#btnMisc"))}),$("#form_submitEtrance").on("submit",function(t){t.preventDefault(),VhUrl=baseUrl+"entrance/service/added",insertData(VhUrl,$("#form_submitEtrance").serialize(),$("#btnEntrance"))}),$("#form_submitGuideService").on("submit",function(t){t.preventDefault(),VhUrl=baseUrl+"guide/service/added",insertData(VhUrl,$("#form_submitGuideService").serialize(),$("#btnaddTransport"))}),$(".ViewLang").on("click",function(){$("#form_lan_title").text("Add Language for "+$(this).data("title")),dataId=$(this).data("id");var t=$("table#tableLanuage tbody"),e=$(this).data("con");getData(dataId,t),$("input[type='text']").val(""),$("#service").val(dataId),loadService(e,"guide_by_country",$("#dropdown-guide_by_country"),"get sort guide update"),$("#country-guide option").each(function(t){$(this).val()==e?$(this).attr("selected",!0):$(this).removeAttr("selected",!0)})}),$(document).on("click",".btnEdit",function(){$("#languid").val($(this).data("id")),$("#title").val($(this).data("name")),$("#price").val($(this).data("price")),$("#kprice").val($(this).data("kprice")),loadService($("option:selected",$("#country-guide")).val(),"guide_by_country",$("#dropdown-guide_by_country"),$(this).data("sup"))}),$(document).on("change",".language",function(){var t=$(this).data("type");$("#phone").val(""),$("#price").val(""),$("#kprice").val("");var e=$("option:selected",this).data("sup");loadService($("option:selected",this).val(),t,$("#dropdown-language-data"),e)}),$(document).on("change",".guide_name",function(){$("#price").val($("option:selected",this).data("price")),$("#kprice").val($("option:selected",this).data("kprice"));var t=$("option:selected",this).data("phone"),e=$("option:selected",this).data("phone2");$("#phone").val(t+"/ "+e)}),$(document).on("change",".service_type",function(){$("#price").val($("option:selected",this).data("price")),$("#kprice").val($("option:selected",this).data("kprice"))}),$(document).on("submit","#form_submitGlanguage",function(t){if(dataForm=$(this).serialize(),""!=$("#title").val())return $.ajax({method:"POST",url:$(this).attr("action"),data:dataForm,dataType:"json",beforeSend:function(){$("#btnSaveLange").text("Loading"),$("#btnSaveLange").attr("disabled","disabled")},success:function(t){console.log(t.message);var e=$("table#tableLanuage tbody");getData($("#service").val(),e),$("input[type='text']").val(""),$(".clearValue").val("")},error:function(t,e,a){return alert("Error!"+t.status),!1},complete:function(){$("#btnSaveLange").html("<i class='fa fa-plus-circle'></i>&nbsp;&nbsp;Add"),$("#btnSaveLange").removeAttr("disabled","disabled")}}),!1;title.focus()}),$("#btnSubmit").on("click",function(t){dataForm={fullname:$("#fullname").val(),username:$("#username").val(),email:$("#email").val(),phone:$("#phone").val(),password:$("#password").val(),"con-password":$("#password").val(),_token:$("input[name='_token']").val()},Url=baseUrl+"user/regiser/new",$("#form_submitUser").submit()&&insertData(Url,dataForm,$(this)),t.preventDefault()})}),$(document).ready(function(){$(".province").on("change",function(){loadService($(this).val(),$(this).data("type"),$("#dropdown-transervice"),"transport service")}),$(".btnEditTran").on("click",function(){$("#tour_id").val($(this).data("id"));var t=$(this).data("country"),e=$(this).data("province"),a=$(this).data("service"),i=$(this).data("vehicle"),n=$(this).data("language"),o=$(this).data("transport"),r=$(this).data("restname"),s=$(this).data("restmenu"),c=$(this).data("type");$("#pax").val($(this).data("bookpax")),$("#remark").val($(this).data("remark")),$(".start_date").val($(this).data("bookdate")),$(".booking_date").val($(this).data("bookingdate")),$("#price").val($(this).data("price")),$("#kprice").val($(this).data("kprice")),$("#phone").val($(this).data("phone")),$("#book_pax").val($(this).data("pax")),$("#remark").text($(this).data("remark")),$("#country option").each(function(e){$(this).val()==t?$(this).attr("selected",!0):$(this).removeAttr("selected",!0)}),loadService(t,"country",$("#dropdown-data"),e),$(".tran_name option").each(function(t){$(this).val()==a?$(this).attr("selected",!0):$(this).removeAttr("selected",!0)}),$(".vehicle option").each(function(t){$(this).val()==i?$(this).attr("selected",!0):$(this).removeAttr("selected",!0)}),$(".driver_name option").each(function(t){$(this).val()==o?$(this).attr("selected",!0):$(this).removeAttr("selected",!0)}),$(".rest_name option").each(function(t){$(this).val()==r?$(this).attr("selected",!0):$(this).removeAttr("selected",!0)}),$(".rest_menu option").each(function(t){$(this).val()==s?$(this).attr("selected",!0):$(this).removeAttr("selected",!0)}),loadService($("option:selected",$(".tran_name")).val(),c,$("#dropdown-vehicle"),n)}),$(document).on("change",".tran_name",function(){loadService($(this).val(),$(this).data("type"),$("#dropdown-vehicle"),"transport service")}),$(document).on("change",".tran_service",function(){loadService($(this).val(),$(this).data("type"),$("#dropdown-vehicle"),$("option:selected",$(".transport")).val())}),$(document).on("change",".vehicle",function(){var t=$("option:selected",this).data("price"),e=$("option:selected",this).data("kprice");$("#price").val(t),$("#kprice").val(e)}),$(document).on("change",".rest_menu",function(){var t=$("option:selected",this).data("price"),e=$("option:selected",this).data("kprice");$("#price").val(t),$("#kprice").val(e)}),$(document).on("change",".transport",function(){var t=$("option:selected",this).data("phone"),e=$("option:selected",this).data("phone2");$("#phone").val(t+"/ "+e),loadService($(this).val(),"tran_service",$("#dropdown-transervice"),"Service Name"),loadService($(this).val(),$(this).data("type"),$("#dropdown-driver_name"),"Driver")}),$(document).on("change",".driver_name",function(){var t=$("option:selected",this).data("phone"),e=$("option:selected",this).data("phone2");$("#phone2").val(t+"/ "+e)}),$(".country").on("change",function(){var t=$(this).val(),e=$(this).data("type");loadService(t,e,$("#dropdown-"+e),"Driver Name")}),$(document).on("change",".rest_name",function(){loadService($(this).val(),$(this).data("type"),$("#dropdown-rest_menu"),"Restaurant Menu")}),$(document).on("click",".changeStatus",function(){var t=$(this).find("i");return $.ajax({method:"GET",url:baseUrl+"changebooking/status",data:{dataid:$(this).data("id"),datatype:$(this).data("type")},contentType:"application/json; charset=utf-8",dataType:"json",cache:!1,success:function(e){1==e.status&&($(t).removeClass("fa fa-warning (alias)"),$(t).addClass("fa fa-check-circle")),0==e.status&&($(t).removeClass("fa fa-check-circle"),$(t).addClass("fa fa-warning (alias)"))},error:function(t,e,a){return alert("Error!"+t.status),!1}}),!1}),$("#company_form").submit(function(t){t.preventDefault(),insertData(baseUrl+"company/",$("#company_form").serialize(),$("#btnAddCompany"))}),$(document).on("keyup change","#data_filter",function(){var t=$(this).data("url"),e=$(this).data("type"),a=$("#dropdown-"+e);if("guide_by_country"==e)var i=$("option:selected",$("#country-guide")).val();else var i=$("option:selected",$(".province")).val();dataFilter(t,$(this).val(),e,a,i)})});